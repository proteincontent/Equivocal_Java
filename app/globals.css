@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/*
 * æ³•å¾‹AIæœåŠ¡ - æç®€ä¸»ä¹‰é‡æ„
 * æ ¸å¿ƒç†å¿µï¼šRamså¼åŠŸèƒ½çº¯ç²¹ä¸»ä¹‰ï¼Œå»é™¤ä¸€åˆ‡è£…é¥°æ€§å™ªéŸ³
 */

:root {
  /* === åŸºç¡€è‰²æ¿ (Neutral Palette) === */
  --background: #fdfdfd; /* æ¥è¿‘çº¯ç™½çš„çº¸å¼ æ„Ÿ */
  --foreground: #171717; /* ææ·±çš„ç°ï¼Œæ¯”çº¯é»‘æ›´æŠ¤çœ¼ */

  --card: #ffffff;
  --card-foreground: #171717;

  --popover: #ffffff;
  --popover-foreground: #171717;

  --primary: #171717; /* æç®€é»‘ */
  --primary-foreground: #ffffff;

  --secondary: #f5f5f5; /* ææµ…ç° */
  --secondary-foreground: #171717;

  --muted: #fafafa;
  --muted-foreground: #737373; /* Neutral-500 */

  --accent: #f5f5f5;
  --accent-foreground: #171717;

  /* === åŠŸèƒ½è‰² (Functional Colors) === */
  /* åªæœ‰åœ¨éœ€è¦å¼•èµ·æ³¨æ„æ—¶æ‰ä½¿ç”¨é¢œè‰² */
  --destructive: #dc2626; /* Red-600 */
  --destructive-foreground: #ffffff;

  --warning: #d97706; /* Amber-600 */
  --success: #059669; /* Emerald-600 */

  --border: #e5e5e5; /* Neutral-200 */
  --input: #e5e5e5;
  --ring: #171717;

  /* === åœ†è§’ç³»ç»Ÿ === */
  --radius: 0.375rem; /* 6pxï¼Œæ›´ç´§å‡‘ */

  /* === ä¾§è¾¹æ  === */
  --sidebar: #fafafa;
  --sidebar-foreground: #171717;
  --sidebar-primary: #171717;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #f5f5f5;
  --sidebar-accent-foreground: #171717;
  --sidebar-border: #e5e5e5;
  --sidebar-ring: #171717;

  /* å…¨å±€ç¼©æ”¾å› å­ */
  --app-scale: 1;
}

.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
  --card: #121212;
  --card-foreground: #ededed;
  --popover: #121212;
  --popover-foreground: #ededed;
  --primary: #ededed;
  --primary-foreground: #0a0a0a;
  --secondary: #262626;
  --secondary-foreground: #ededed;
  --muted: #171717;
  --muted-foreground: #a3a3a3;
  --accent: #262626;
  --accent-foreground: #ededed;
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --warning: #f59e0b;
  --success: #10b981;
  --border: #262626;
  --input: #262626;
  --ring: #ededed;

  --sidebar: #121212;
  --sidebar-foreground: #ededed;
  --sidebar-primary: #ededed;
  --sidebar-primary-foreground: #0a0a0a;
  --sidebar-accent: #262626;
  --sidebar-accent-foreground: #ededed;
  --sidebar-border: #262626;
  --sidebar-ring: #ededed;
}

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  /* Avoid build-time dependency on Google Fonts (next/font/google). */
  --font-serif: var(--font-noto-serif, ui-serif, Georgia, Cambria, "Times New Roman", Times, serif);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* æ³¨å†Œå“ç‰Œè‰²åˆ° Tailwind ä¸»é¢˜ */
  --color-brand-navy: var(--brand-navy);
  --color-brand-navy-light: var(--brand-navy-light);
  --color-brand-gold: var(--brand-gold);
  --color-brand-gold-light: var(--brand-gold-light);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  html {
    scrollbar-gutter: stable; /* å§‹ç»ˆé¢„ç•™æ»šåŠ¨æ¡ç©ºé—´ï¼Œé˜²æ­¢å¸ƒå±€æŠ–åŠ¨ */
    font-size: calc(16px * var(--app-scale));
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* === åŠ¨ç”»ç³»ç»Ÿ (æç®€ç‰ˆ) === */
/* åªæœ‰å¿…è¦çš„çŠ¶æ€è½¬æ¢æ‰éœ€è¦åŠ¨ç”» */

.transition-all-200 {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* === ç²¾è‡´æ»šåŠ¨æ¡ === */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.08);
  border-radius: 100vh;
  transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.15);
}

.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* Firefox support */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.08) transparent;
}

.dark * {
  scrollbar-color: rgba(255, 255, 255, 0.08) transparent;
}

/* === æç®€ç»„ä»¶æ ·å¼ === */

/* æŒ‰é’® - å»é™¤æ‰€æœ‰æµ®å¤¸çš„é˜´å½±å’Œæ¸å˜ */
.btn-premium {
  @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50;
  @apply bg-primary text-primary-foreground shadow hover:bg-primary/90;
}

/* === åˆåŒæ’ç‰ˆç³»ç»Ÿ (Typography) === */

.contract-paper {
  @apply relative mx-auto bg-white;
  /* æ¨¡æ‹ŸA4çº¸çš„æ¯”ä¾‹å’Œè´¨æ„Ÿï¼Œä½†ä¸è¦é˜´å½±ï¼Œè¦çš„æ˜¯çº¯ç²¹çš„å†…å®¹æ‰¿è½½ */
  max-width: 210mm; /* A4 width */
  min-height: 297mm;
  padding: 48px;
}

/* æ‰“å°æ ·å¼ä¼˜åŒ– */
@media print {
  .contract-paper {
    padding: 0;
    max-width: none;
  }
}

.contract-doc {
  font-family: "Times New Roman", Times, serif; /* ç»å…¸çš„æ³•å¾‹å­—ä½“ */
  color: #111827; /* Gray-900 */
  font-size: 16px;
  line-height: 1.8; /* å®½æ¾çš„è¡Œé«˜ï¼Œä¾¿äºé˜…è¯» */
  text-align: justify; /* ä¸¤ç«¯å¯¹é½ï¼Œå¢åŠ åº„é‡æ„Ÿ */
}

/* æ ‡é¢˜å±‚çº§ */
.contract-doc h1 {
  font-size: 24px;
  font-weight: 700;
  text-align: center;
  margin-bottom: 32px;
  color: #000;
}

.contract-doc h2 {
  font-size: 18px;
  font-weight: 700;
  margin-top: 24px;
  margin-bottom: 16px;
}

.contract-doc h3 {
  font-size: 16px;
  font-weight: 700;
  margin-top: 16px;
  margin-bottom: 12px;
}

.contract-doc p {
  margin-bottom: 16px;
}

/* åˆ—è¡¨ç¼©è¿›ä¼˜åŒ– */
.contract-doc ul,
.contract-doc ol {
  padding-left: 2em;
  margin-bottom: 16px;
}

/* è¡¨æ ¼æ ·å¼ */
.contract-doc table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
  font-size: 14px;
}

.contract-doc th,
.contract-doc td {
  border: 1px solid #e5e5e5;
  padding: 8px 12px;
  text-align: left;
}

.contract-doc th {
  background-color: #fafafa;
  font-weight: 600;
}

/* === é£é™©é«˜äº®ç³»ç»Ÿ (Annotation System) === */
/*
 * é‡‡ç”¨èƒŒæ™¯è‰²å—+ä¸‹åˆ’å®çº¿é£æ ¼ï¼Œå¢å¼ºè§†è§‰æƒé‡
 * çµæ„Ÿæ¥æºï¼šæ³•å¾‹åˆåŒå®¡æŸ¥ä¸“ä¸šå·¥å…·
 */

/* åŸºç¡€é«˜äº®å®¹å™¨ */
.risk-highlight {
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  border-bottom-width: 2px;
  border-bottom-style: solid;
  border-radius: 2px;
  padding: 0 2px; /* ç»™æ–‡å­—ä¸€ç‚¹å‘¼å¸ç©ºé—´ */
  margin: 0 -1px; /* è§†è§‰è¡¥å¿ */
}

/* === é£é™©ç­‰çº§æ ·å¼ === */

/* High Risk: çº¢è‰²èƒŒæ™¯ + çº¢è‰²ä¸‹åˆ’çº¿ */
.risk-high {
  background-color: rgba(220, 38, 38, 0.08); /* Red-500 with low opacity */
  border-bottom-color: rgba(220, 38, 38, 0.6);
}
.risk-high::before {
  content: "âš ï¸";
  font-size: 0.7em;
  margin-right: 4px;
  vertical-align: text-top;
  opacity: 0.8;
}
.risk-high:hover {
  background-color: rgba(220, 38, 38, 0.15);
  border-bottom-color: var(--destructive);
}

/* Medium Risk: æ©™è‰²èƒŒæ™¯ + æ©™è‰²ä¸‹åˆ’çº¿ */
.risk-medium {
  background-color: rgba(217, 119, 6, 0.08); /* Amber-600 with low opacity */
  border-bottom-color: rgba(217, 119, 6, 0.6);
}
.risk-medium::before {
  content: "âš¡";
  font-size: 0.7em;
  margin-right: 4px;
  vertical-align: text-top;
  opacity: 0.8;
}
.risk-medium:hover {
  background-color: rgba(217, 119, 6, 0.15);
  border-bottom-color: var(--warning);
}

/* Safe/Low Risk: ç»¿è‰²èƒŒæ™¯ + ç»¿è‰²ä¸‹åˆ’çº¿ */
.risk-safe {
  background-color: rgba(5, 150, 105, 0.08); /* Emerald-600 with low opacity */
  border-bottom-color: rgba(5, 150, 105, 0.6);
}
.risk-safe::before {
  content: "ğŸ›¡ï¸";
  font-size: 0.7em;
  margin-right: 4px;
  vertical-align: text-top;
  opacity: 0.8;
}
.risk-safe:hover {
  background-color: rgba(5, 150, 105, 0.15);
  border-bottom-color: var(--success);
}

/* === æ¿€æ´»çŠ¶æ€ (Active State) === */
/* å½“ç‚¹å‡»å¡ç‰‡æˆ–æ–‡æœ¬æ—¶ï¼Œé«˜äº®æ˜¾ç¤ºå½“å‰å…³æ³¨çš„é£é™©ç‚¹ */

.risk-highlight-active {
  position: relative;
  z-index: 10;
  box-shadow:
    0 0 0 4px rgba(255, 255, 255, 0.8),
    0 0 0 6px currentColor; /* åŒå±‚å…‰ç¯æ•ˆæœ */
}

.risk-highlight-active.risk-high {
  background-color: rgba(220, 38, 38, 0.2);
  border-bottom-color: var(--destructive);
  color: #7f1d1d; /* Red-900 */
}

.risk-highlight-active.risk-medium {
  background-color: rgba(217, 119, 6, 0.2);
  border-bottom-color: var(--warning);
  color: #78350f; /* Amber-900 */
}

.risk-highlight-active.risk-safe {
  background-color: rgba(5, 150, 105, 0.2);
  border-bottom-color: var(--success);
  color: #064e3b; /* Emerald-900 */
}

/* === ç­›é€‰æ—¶çš„æ·¡åŒ–æ•ˆæœ (Dimmed State) === */
/* å½“ç”¨æˆ·ç­›é€‰ç‰¹å®šé£é™©ç­‰çº§æ—¶ï¼Œå…¶ä»–ç­‰çº§çš„é«˜äº®å˜æ·¡ */

.risk-dimmed {
  opacity: 0.3;
  filter: grayscale(0.5);
  pointer-events: none; /* ç¦æ­¢ç‚¹å‡» */
}

.risk-dimmed::before {
  opacity: 0.3;
}

/* === å·²ä¿®å¤çŠ¶æ€ (Fixed State) === */
/* å½“ç”¨æˆ·é‡‡çº³ä¿®æ”¹å»ºè®®åçš„æ ·å¼ */

.risk-fixed {
  background-color: rgba(34, 197, 94, 0.15);
  color: #166534; /* Green-800 */
  padding: 0 4px;
  border-radius: 2px;
  transition: all 0.3s ease;
}

.risk-fixed:hover {
  background-color: rgba(34, 197, 94, 0.25);
}

/* æš—è‰²æ¨¡å¼ä¸‹çš„å·²ä¿®å¤çŠ¶æ€ */
.dark .risk-fixed {
  background-color: rgba(34, 197, 94, 0.2);
  color: #86efac; /* Green-300 */
}
